-- Create tables with BIGINT primary keys
CREATE TABLE CASH_UNIT (ID BIGINT PRIMARY KEY,NAME VARCHAR(15) NOT NULL, DESCRIPTION VARCHAR(50),VALUE_AMOUNT DECIMAL NOT NULL,INTEGER_VALUE_AMOUNT INT NOT NULL, DECIMAL_VALUE_AMOUNT INT NOT NULL,CURRENCY_CODE CHAR(3) NOT NULL,MONEY_TYPE VARCHAR(15) NOT NULL,CREATION_DATETIME TIMESTAMP NOT NULL DEFAULT NOW(),UPDATE_DATETIME TIMESTAMP);
CREATE TABLE CASH_UNIT_GROUP (ID BIGINT PRIMARY KEY,  NAME VARCHAR(15) NOT NULL,  QUANTITY INT NOT NULL ,  CASH_UNIT_ID BIGINT NOT NULL,  CREATION_DATETIME TIMESTAMP NOT NULL DEFAULT NOW(), UPDATE_DATETIME TIMESTAMP);
CREATE TABLE CASH_STOCK_OPERATION (  ID BIGINT PRIMARY KEY,  CASH_STOCK_OPERATION_TYPE_VALUE_ID BIGINT NOT NULL,  CASH_STOCK_SESSION_ID BIGINT,  CASH_STOCK_ID BIGINT NOT NULL, EMPLOYEE_ID BIGINT, PARTY_ID BIGINT,
  CASH_STOCK_BOOKING_REQUEST_ID BIGINT,  COMMENT_TEXT VARCHAR(320),  JUSTIFICATION_TEXT VARCHAR(500),  JUSTIFICATION_DOCUMENT_NUMBER VARCHAR(320),  STATUS VARCHAR(25) NOT NULL,
  AMOUNT BIGINT,  CURRENCY_CODE CHAR(3),  COUNTER_VALUE_AMOUNT BIGINT,  CREATION_DATETIME TIMESTAMP NOT NULL DEFAULT NOW(),  UPDATE_DATETIME TIMESTAMP);
CREATE TABLE CASH_STOCK_OPERATION_TYPE_VALUE (  ID BIGINT PRIMARY KEY,  NAME VARCHAR(50) NOT NULL,  DESCRIPTION VARCHAR(120),  MIN_AMOUNT_LIMITATION BIGINT,  MAX_AMOUNT_LIMITATION BIGINT, CREATION_DATETIME TIMESTAMP NOT NULL DEFAULT NOW(),
  UPDATE_DATETIME TIMESTAMP);
CREATE TABLE CASH_STOCK_BOOKING_REQUEST (  ID BIGINT PRIMARY KEY,  STATUS VARCHAR(25),  TRANSACTION_ID VARCHAR(50) NOT NULL,  REMITTANCE_MESSAGE VARCHAR(320),  CREATION_DATETIME TIMESTAMP NOT NULL DEFAULT NOW(),  UPDATE_DATETIME TIMESTAMP);
CREATE TABLE PARTY (  ID BIGINT PRIMARY KEY,  PARTY_ACCOUNT VARCHAR(34),  PARTY_ID VARCHAR(10) NOT NULL,  PARTY_NAME VARCHAR(100),  CREATION_DATETIME TIMESTAMP NOT NULL DEFAULT NOW(), UPDATE_DATETIME TIMESTAMP);
CREATE TABLE CASH_UNIT_STOCK_OPERATION (  ID BIGINT PRIMARY KEY,  ACTION_NAME CHAR(3) NOT NULL,  QUANTITY INT NOT NULL,  CASH_STOCK_OPERATION_ID BIGINT NOT NULL,  CASH_UNIT_STOCK_ID BIGINT NOT NULL,  CASH_UNIT_ID BIGINT NOT NULL, CREATION_DATETIME TIMESTAMP NOT NULL DEFAULT NOW(), UPDATE_DATETIME TIMESTAMP);
CREATE TABLE CASH_UNIT_STOCK (ID BIGINT PRIMARY KEY,  CASH_UNIT_STOCK_STAGE_VALUE_ID BIGINT NOT NULL,  CASH_UNIT_ID BIGINT NOT NULL,  CASH_STOCK_SESSION_ID BIGINT NOT NULL,  QUANTITY INT NOT NULL,  CREATION_DATETIME TIMESTAMP NOT NULL DEFAULT NOW(), UPDATE_DATETIME TIMESTAMP);
CREATE TABLE CASH_UNIT_STOCK_STAGE_VALUE (ID BIGINT PRIMARY KEY,  NAME VARCHAR(15) NOT NULL,  IS_CUSTOMER_OPERATION_ALLOWED BOOLEAN,  IS_BRANCH_EMPLOYEE_OPERATION_ALLOWED BOOLEAN,  CREATION_DATETIME TIMESTAMP NOT NULL DEFAULT NOW(), UPDATE_DATETIME TIMESTAMP);
CREATE TABLE CASH_STOCK_SESSION (  ID BIGINT PRIMARY KEY,  CASH_STOCK_ID BIGINT NOT NULL,  SESSION_TYPE VARCHAR(15) NOT NULL,  STATUS VARCHAR(15) NOT NULL,  LAST_CASH_UNIT_STOCK_STAGE_VALUE_ID BIGINT,  OPEN_DATETIME TIMESTAMP NOT NULL,  CLOSE_DATETIME TIMESTAMP, EMPLOYEE_ID BIGINT NOT NULL, CREATION_DATETIME TIMESTAMP NOT NULL DEFAULT NOW(), UPDATE_DATETIME TIMESTAMP);
CREATE TABLE CASH_STOCK (  ID BIGINT PRIMARY KEY,  STOCK_TYPE VARCHAR(15) NOT NULL,  STATUS VARCHAR(15) NOT NULL,  LAST_SESSION_ID BIGINT,  AMOUNT BIGINT NOT NULL,  CURRENCY_CODE CHAR(3) NOT NULL,  UNIT_ID VARCHAR(6) NOT NULL,  PARENT_CASH_STOCK_ID BIGINT, CREATION_DATETIME TIMESTAMP NOT NULL DEFAULT NOW(),  UPDATE_DATETIME TIMESTAMP);
CREATE TABLE CASH_STOCK_DELIVERY (  ID BIGINT PRIMARY KEY,  CASH_STOCK_ID BIGINT NOT NULL,  DELIVERY_TYPE VARCHAR(15) NOT NULL,  IS_MONDAY BOOLEAN,  IS_TUESDAY BOOLEAN,  IS_WEDNESDAY BOOLEAN,  IS_THURSDAY BOOLEAN,  IS_FRIDAY BOOLEAN,  IS_SATURDAY BOOLEAN,  IS_SUNDAY BOOLEAN,  CREATION_DATETIME TIMESTAMP NOT NULL DEFAULT NOW(),  UPDATE_DATETIME TIMESTAMP, CONSTRAINT UC_CASH_STOCK_DELIVERY UNIQUE (CASH_STOCK_ID, DELIVERY_TYPE));
CREATE TABLE EMPLOYEE (  ID BIGINT PRIMARY KEY,  EMPLOYEE_ROBI_ID VARCHAR(6) NOT NULL UNIQUE,  EMPLOYEE_LAST_NAME VARCHAR(40),  EMPLOYEE_FIRST_NAME VARCHAR(20),  CREATION_DATETIME TIMESTAMP NOT NULL DEFAULT NOW(),  UPDATE_DATETIME TIMESTAMP);
-- Add foreign key constraints
ALTER TABLE CASH_UNIT_GROUP ADD CONSTRAINT FK_CASH_UNIT_GROUP_CASH_UNIT_ID FOREIGN KEY (CASH_UNIT_ID) REFERENCES CASH_UNIT(ID);

ALTER TABLE CASH_STOCK_OPERATION ADD CONSTRAINT FK_CASH_STOCK_OPERATION_CASH_STOCK_OPERATION_TYPE_VALUE_IDFOREIGN KEY (CASH_STOCK_OPERATION_TYPE_VALUE_ID) REFERENCES CASH_STOCK_OPERATION_TYPE_VALUE(ID),ADD CONSTRAINT FK_CASH_STOCK_OPERATION_CASH_STOCK_SESSION_ID
FOREIGN KEY (CASH_STOCK_SESSION_ID) REFERENCES CASH_STOCK_SESSION(ID),ADD CONSTRAINT FK_CASH_STOCK_OPERATION_CASH_STOCK_ID FOREIGN KEY (CASH_STOCK_ID) REFERENCES CASH_STOCK(ID),
ADD CONSTRAINT FK_CASH_STOCK_OPERATION_EMPLOYEE_ID FOREIGN KEY (EMPLOYEE_ID) REFERENCES EMPLOYEE(ID),ADD CONSTRAINT FK_CASH_STOCK_OPERATION_PARTY_ID FOREIGN KEY (PARTY_ID) REFERENCES PARTY(ID),ADD CONSTRAINT FK_CASH_STOCK_OPERATION_CASH_STOCK_BOOKING_REQUEST_ID FOREIGN KEY (CASH_STOCK_BOOKING_REQUEST_ID) REFERENCES CASH_STOCK_BOOKING_REQUEST(ID);

ALTER TABLE CASH_UNIT_STOCK_OPERATION ADD CONSTRAINT FK_CASH_UNIT_STOCK_OPERATION_CASH_STOCK_OPERATION_ID FOREIGN KEY (CASH_STOCK_OPERATION_ID) REFERENCES CASH_STOCK_OPERATION(ID),
ADD CONSTRAINT FK_CASH_UNIT_STOCK_OPERATION_CASH_UNIT_STOCK_ID FOREIGN KEY (CASH_UNIT_STOCK_ID) REFERENCES CASH_UNIT_STOCK(ID),ADD CONSTRAINT FK_CASH_UNIT_STOCK_OPERATION_CASH_UNIT_ID FOREIGN KEY (CASH_UNIT_ID) REFERENCES CASH_UNIT(ID);

ALTER TABLE CASH_UNIT_STOCK ADD CONSTRAINT FK_CASH_UNIT_STOCK_STAGE_VALUE_ID FOREIGN KEY (CASH_UNIT_STOCK_STAGE_VALUE_ID) REFERENCES CASH_UNIT_STOCK_STAGE_VALUE(ID),
ADD CONSTRAINT FK_CASH_UNIT_STOCK_CASH_UNIT_ID FOREIGN KEY (CASH_UNIT_ID) REFERENCES CASH_UNIT(ID),ADD CONSTRAINT FK_CASH_UNIT_STOCK_CASH_STOCK_SESSION_ID FOREIGN KEY (CASH_STOCK_SESSION_ID) REFERENCES CASH_STOCK_SESSION(ID);

ALTER TABLE CASH_STOCK_SESSION ADD CONSTRAINT FK_CASH_STOCK_SESSION_EMPLOYEE_ID FOREIGN KEY (EMPLOYEE_ID) REFERENCES EMPLOYEE(ID),ADD CONSTRAINT FK_CASH_STOCK_SESSION_CASH_STOCK_ID
FOREIGN KEY (CASH_STOCK_ID) REFERENCES CASH_STOCK(ID),ADD CONSTRAINT FK_CASH_UNIT_SESSION_STAGE_VALUE_ID FOREIGN KEY (LAST_CASH_UNIT_STOCK_STAGE_VALUE_ID) REFERENCES CASH_UNIT_STOCK_STAGE_VALUE(ID);

ALTER TABLE CASH_STOCK ADD CONSTRAINT FK_CASH_STOCK_PARENT_CASH_STOCK_ID  FOREIGN KEY (PARENT_CASH_STOCK_ID) REFERENCES CASH_STOCK(ID),ADD CONSTRAINT FK_CASH_STOCK_LAST_SESSION_ID
FOREIGN KEY (LAST_SESSION_ID) REFERENCES CASH_STOCK_SESSION(ID);

ALTER TABLE CASH_STOCK_DELIVERY ADD CONSTRAINT FK_CASH_STOCK_DELIVERY_CASH_STOCK_ID FOREIGN KEY (CASH_STOCK_ID) REFERENCES CASH_STOCK(ID);
